<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html">
<head>

	<title>BigRender</title>

	<script src="//cdnjs.cloudflare.com/ajax/libs/EaselJS/0.6.1/easeljs.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.1/underscore.js"></script>

	<!-- build:js scripts/bigRender.js -->
	<script src="scripts/controller/CommandChainController.js"></script>
	<script src="scripts/controller/CompositionController.js"></script>
	<script src="scripts/controller/LayerForwarder.js"></script>
	<script src="scripts/controller/LayerManager.js"></script>

	<script src="scripts/model/CommandChainModel.js"></script>
	<script src="scripts/model/CompositionModel.js"></script>
	<script src="scripts/model/LayerModel.js"></script>

	<script src="scripts/utils/CanvasCache.js"></script>
	<script src="scripts/utils/CappedStorage.js"></script>
	<script src="scripts/utils/CommandDispatcher.js"></script>
	<script src="scripts/utils/DisplayFactory.js"></script>
	<script src="scripts/utils/Maths.js"></script>
	<script src="scripts/utils/Queue.js"></script>
	<script src="scripts/utils/Task.js"></script>

	<script src="scripts/view/CompositionView.js"></script>
	<script src="scripts/view/DrawTools.js"></script>
	<script src="scripts/view/LayerBitmapView.js"></script>
	<script src="scripts/view/LayerObjectView.js"></script>
	<script src="scripts/view/LayerView.js"></script>

	<script src="scripts/BigRender.js"></script>
	<script src="scripts/constants.js"></script>
	<!-- endbuild -->

</head>


<body style="background-color:lightgray">

	<a href="javascript:drawTest();">Draw Test</a> |
	<a href="javascript:objTest();">Object Test</a> |
	<a href="javascript:longDrawTest();">Long Draw Test</a> |
	<a href="javascript:saveTest();">Save/Load Test</a> |
	<a href="javascript:pencilTest();">Pencil Test</a>
	<br>
	<br>
	<h1 id="title"></h1>
	<canvas id="demo-canvas"></canvas>

	<script>
		var canvas = document.getElementById('demo-canvas');
		var r = new bigRender.BigRender(canvas);
		r.setDimensions(200, 200);

		function setTitle(str) {
			document.getElementById('title').innerHTML = str;
		}

		//draw test
		function drawTest() {
			setTitle('Draw Test');
			r.clear();
			r.addCommand({type: bigRender.command.CREATE_LAYER});
			r.addCommand({type: bigRender.command.DRAW_LINE, path: [0,0,50,50,100,60], lineWidth: 5, strokeStyle: '#00FF00'});
			r.addCommand({type: bigRender.command.DRAW_SHAPE, shape: bigRender.shape.ELLIPSE, x: 10, y: 10, width: 15, height: 25});
		}

		//object draw test
		function objTest() {
			setTitle('Object Test');
			r.clear();
			r.addCommand({type: bigRender.command.CREATE_LAYER});
			r.addCommand({type: bigRender.command.ADD_OBJECT, src: 'img/tree.jpeg', objectId: 1});
			r.addCommand({type: bigRender.command.ADD_OBJECT, src: 'img/tree.jpeg', objectId: 2, scaleX: 0.1, scaleY: 0.1});
			r.addCommand({type: bigRender.command.MOVE_OBJECT, objectId: 1, x: 100, y: 150, rotation: 180});
			r.addCommand({type: bigRender.command.MOVE_OBJECT, objectId: 1, scaleX: 0.5, scaleY: 0.25});
		}

		//long draw test
		function longDrawTest() {
			setTitle('Long Draw Test');
			r.clear();
			r.addCommand({type: bigRender.command.CREATE_LAYER});
			for(var i=0; i<10000; i++) {
				var x1 = Math.random()* r.width;
				var y1 = Math.random() * r.height;
				var x2 = Math.random()* r.width;
				var y2 = Math.random() * r.height;
				r.addCommand({type: bigRender.command.DRAW_LINE, path: [x1, y1, x2, y2], lineWidth: 1, strokeStyle: '#123456', globalAlpha: 0.25});
			}
		}

		//save test
		function saveTest() {
			setTitle('Save Test');
			r.clear();
			r.addCommand({type: bigRender.command.CREATE_LAYER, layerId:1});
			r.addCommand({type: bigRender.command.CREATE_LAYER, layerId:2});
			r.setTargetLayer(2);
			r.addCommand({type: bigRender.command.DRAW_SHAPE, shape: bigRender.shape.STAR, x: 10, y: 10, width: 50, height: 50});
		}

		//pencil test
		function pencilTest() {
			setTitle('Pencil Test');
			r.clear();
			r.addCommand({type: bigRender.command.CREATE_LAYER});
			r.addCommand({type: bigRender.command.DRAW_LINE, brush: bigRender.brush.PIXEL, path: [10,10,20,20,50,20,0,100,20,20,70,200]});
			r.addCommand({type: bigRender.command.DRAW_LINE, brush: bigRender.brush.PIXEL, path: [75,89,210,345], width: 10, height: 2});
		}

		saveTest();
	</script>

</body>
</html>